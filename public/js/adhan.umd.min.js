!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).adhan={})}(this,(function(t){"use strict";const e={Shafi:"shafi",Hanafi:"hanafi"};const n={MiddleOfTheNight:"middleofthenight",SeventhOfTheNight:"seventhofthenight",TwilightAngle:"twilightangle",recommended:t=>t.latitude>48?n.SeventhOfTheNight:n.MiddleOfTheNight};class a{constructor(t,e){this.latitude=t,this.longitude=e}}const i={Nearest:"nearest",Up:"up",None:"none"};function s(t,e){const n=t.getFullYear(),a=t.getMonth(),i=t.getDate()+e,s=t.getHours(),r=t.getMinutes(),o=t.getSeconds();return new Date(n,a,i,s,r,o)}function r(t,e){return o(t,60*e)}function o(t,e){return new Date(t.getTime()+1e3*e)}function h(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.Nearest;const n=t.getUTCSeconds();let a=n>=30?60-n:-1*n;return e===i.Up?a=60-n:e===i.None&&(a=0),o(t,a)}function u(t){let e=0;const n=[31,f.isLeapYear(t.getFullYear())?29:28,31,30,31,30,31,31,30,31,30,31];for(let a=0;a<t.getMonth();a++)e+=n[a];return e+=t.getDate(),e}function l(t){return t instanceof Date&&!isNaN(t.valueOf())}function d(t){return t*Math.PI/180}function c(t){return 180*t/Math.PI}function g(t,e){return t-e*Math.floor(t/e)}function m(t){return g(t,360)}const M={General:"general",Ahmer:"ahmer",Abyad:"abyad"},f={meanSolarLongitude(t){const e=t;return m(280.4664567+36000.76983*e+3032e-7*Math.pow(e,2))},meanLunarLongitude:t=>m(218.3165+481267.8813*t),ascendingLunarNodeLongitude(t){const e=t;return m(125.04452-1934.136261*e+.0020708*Math.pow(e,2)+Math.pow(e,3)/45e4)},meanSolarAnomaly(t){const e=t;return m(357.52911+35999.05029*e-1537e-7*Math.pow(e,2))},solarEquationOfTheCenter(t,e){const n=t,a=d(e);return(1.914602-.004817*n-14e-6*Math.pow(n,2))*Math.sin(a)+(.019993-101e-6*n)*Math.sin(2*a)+289e-6*Math.sin(3*a)},apparentSolarLongitude(t,e){const n=t,a=125.04-1934.136*n;return m(e+f.solarEquationOfTheCenter(n,f.meanSolarAnomaly(n))-.00569-.00478*Math.sin(d(a)))},meanObliquityOfTheEcliptic(t){const e=t;return 23.439291-.013004167*e-1.639e-7*Math.pow(e,2)+5.036e-7*Math.pow(e,3)},apparentObliquityOfTheEcliptic(t,e){const n=125.04-1934.136*t;return e+.00256*Math.cos(d(n))},meanSiderealTime(t){const e=t;return m(280.46061837+360.98564736629*(36525*e+2451545-2451545)+387933e-9*Math.pow(e,2)-Math.pow(e,3)/3871e4)},nutationInLongitude(t,e,n,a){const i=e,s=n,r=a;return-17.2/3600*Math.sin(d(r))-1.32/3600*Math.sin(2*d(i))-.23/3600*Math.sin(2*d(s))+.21/3600*Math.sin(2*d(r))},nutationInObliquity(t,e,n,a){const i=e,s=n,r=a;return 9.2/3600*Math.cos(d(r))+.57/3600*Math.cos(2*d(i))+.1/3600*Math.cos(2*d(s))-.09/3600*Math.cos(2*d(r))},altitudeOfCelestialBody(t,e,n){const a=t,i=e,s=n,r=Math.sin(d(a))*Math.sin(d(i)),o=Math.cos(d(a))*Math.cos(d(i))*Math.cos(d(s));return c(Math.asin(r+o))},approximateTransit:(t,e,n)=>g((n+-1*t-e)/360,1),correctedTransit(t,e,n,a,i,s){const r=t,o=a,h=i,u=s,l=-1*e,d=m(n+360.985647*r),c=m(f.interpolateAngles(o,h,u,r));var g;return 24*(r+((g=d-l-c)>=-180&&g<=180?g:g-360*Math.round(g/360))/-360)},correctedHourAngle(t,e,n,a,i,s,r,o,h,u,l){const g=t,M=e,p=i,A=s,w=r,b=o,T=h,j=u,S=l,D=-1*n.longitude,v=Math.sin(d(M))-Math.sin(d(n.latitude))*Math.sin(d(T)),N=Math.cos(d(n.latitude))*Math.cos(d(T)),y=c(Math.acos(v/N)),O=a?g+y/360:g-y/360,L=m(p+360.985647*O),Y=m(f.interpolateAngles(A,w,b,O)),C=f.interpolate(T,j,S,O),F=L-D-Y;return 24*(O+(f.altitudeOfCelestialBody(n.latitude,C,F)-M)/(360*Math.cos(d(C))*Math.cos(d(n.latitude))*Math.sin(d(F))))},interpolate(t,e,n,a){const i=t-e,s=n-t;return t+a/2*(i+s+a*(s-i))},interpolateAngles(t,e,n,a){const i=m(t-e),s=m(n-t);return t+a/2*(i+s+a*(s-i))},julianDay(t,e,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=Math.trunc,s=i(e>2?t:t-1),r=i(e>2?e:e+12),o=n+a/24,h=i(s/100),u=i(2-h+i(h/4));return i(365.25*(s+4716))+i(30.6001*(r+1))+o+u-1524.5},julianCentury:t=>(t-2451545)/36525,isLeapYear:t=>t%4==0&&(t%100!=0||t%400==0),seasonAdjustedMorningTwilight(t,e,n,a){const i=75+28.65/55*Math.abs(t),s=75+19.44/55*Math.abs(t),r=75+32.74/55*Math.abs(t),h=75+48.1/55*Math.abs(t),u=function(){const a=f.daysSinceSolstice(e,n,t);return a<91?i+(s-i)/91*a:a<137?s+(r-s)/46*(a-91):a<183?r+(h-r)/46*(a-137):a<229?h+(r-h)/46*(a-183):a<275?r+(s-r)/46*(a-229):s+(i-s)/91*(a-275)}();return o(a,Math.round(-60*u))},seasonAdjustedEveningTwilight(t,e,n,a,i){let s,r,h,u;i===M.Ahmer?(s=62+17.4/55*Math.abs(t),r=62-7.16/55*Math.abs(t),h=62+5.12/55*Math.abs(t),u=62+19.44/55*Math.abs(t)):i===M.Abyad?(s=75+25.6/55*Math.abs(t),r=75+7.16/55*Math.abs(t),h=75+36.84/55*Math.abs(t),u=75+1.488*Math.abs(t)):(s=75+25.6/55*Math.abs(t),r=75+2.05/55*Math.abs(t),h=75-9.21/55*Math.abs(t),u=75+6.14/55*Math.abs(t));const l=function(){const a=f.daysSinceSolstice(e,n,t);return a<91?s+(r-s)/91*a:a<137?r+(h-r)/46*(a-91):a<183?h+(u-h)/46*(a-137):a<229?u+(h-u)/46*(a-183):a<275?h+(r-h)/46*(a-229):r+(s-r)/91*(a-275)}();return o(a,Math.round(60*l))},daysSinceSolstice(t,e,n){let a=0;const i=f.isLeapYear(e)?173:172,s=f.isLeapYear(e)?366:365;return n>=0?(a=t+10,a>=s&&(a-=s)):(a=t-i,a<0&&(a+=s)),a}};class p{constructor(t){const e=f.julianCentury(t),n=f.meanSolarLongitude(e),a=f.meanLunarLongitude(e),i=f.ascendingLunarNodeLongitude(e),s=d(f.apparentSolarLongitude(e,n)),r=f.meanSiderealTime(e),o=f.nutationInLongitude(e,n,a,i),h=f.nutationInObliquity(e,n,a,i),u=f.meanObliquityOfTheEcliptic(e),l=d(f.apparentObliquityOfTheEcliptic(e,u));this.declination=c(Math.asin(Math.sin(l)*Math.sin(s))),this.rightAscension=m(c(Math.atan2(Math.cos(l)*Math.sin(s),Math.cos(s)))),this.apparentSiderealTime=r+3600*o*Math.cos(d(u+h))/3600}}class A{constructor(t,e){const n=f.julianDay(t.getFullYear(),t.getMonth()+1,t.getDate(),0);this.observer=e,this.solar=new p(n),this.prevSolar=new p(n-1),this.nextSolar=new p(n+1);const a=f.approximateTransit(e.longitude,this.solar.apparentSiderealTime,this.solar.rightAscension),i=-50/60;this.approxTransit=a,this.transit=f.correctedTransit(a,e.longitude,this.solar.apparentSiderealTime,this.solar.rightAscension,this.prevSolar.rightAscension,this.nextSolar.rightAscension),this.sunrise=f.correctedHourAngle(a,i,e,!1,this.solar.apparentSiderealTime,this.solar.rightAscension,this.prevSolar.rightAscension,this.nextSolar.rightAscension,this.solar.declination,this.prevSolar.declination,this.nextSolar.declination),this.sunset=f.correctedHourAngle(a,i,e,!0,this.solar.apparentSiderealTime,this.solar.rightAscension,this.prevSolar.rightAscension,this.nextSolar.rightAscension,this.solar.declination,this.prevSolar.declination,this.nextSolar.declination)}hourAngle(t,e){return f.correctedHourAngle(this.approxTransit,t,this.observer,e,this.solar.apparentSiderealTime,this.solar.rightAscension,this.prevSolar.rightAscension,this.nextSolar.rightAscension,this.solar.declination,this.prevSolar.declination,this.nextSolar.declination)}afternoon(t){const e=Math.abs(this.observer.latitude-this.solar.declination),n=t+Math.tan(d(e)),a=c(Math.atan(1/n));return this.hourAngle(a,!0)}}const w={AqrabBalad:"AqrabBalad",AqrabYaum:"AqrabYaum",Unresolved:"Unresolved"},b=t=>!isNaN(t.sunrise)&&!isNaN(t.sunset),T=function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(n>Math.ceil(182.5))return null;const i=new Date(e.getTime());i.setDate(i.getDate()+a*n);const r=s(i,1),o=new A(i,t),h=new A(r,t);return b(o)&&b(h)?{date:e,tomorrow:r,coordinates:t,solarTime:o,tomorrowSolarTime:h}:T(t,e,n+(a>0?0:1),-a)},j=(t,e,n)=>{const i=new A(e,{...t,latitude:n}),r=s(e,1),o=new A(r,{...t,latitude:n});return b(i)&&b(o)?{date:e,tomorrow:r,coordinates:new a(n,t.longitude),solarTime:i,tomorrowSolarTime:o}:Math.abs(n)>=65?j(t,e,n-.5*Math.sign(n)):null};class S{madhab=e.Shafi;highLatitudeRule=n.MiddleOfTheNight;adjustments={fajr:0,sunrise:0,dhuhr:0,asr:0,maghrib:0,isha:0};methodAdjustments={fajr:0,sunrise:0,dhuhr:0,asr:0,maghrib:0,isha:0};polarCircleResolution=w.Unresolved;rounding=i.Nearest;shafaq=M.General;constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;this.method=t,this.fajrAngle=e,this.ishaAngle=n,this.ishaInterval=a,this.maghribAngle=i,null===this.method&&(this.method="Other")}nightPortions(){switch(this.highLatitudeRule){case n.MiddleOfTheNight:return{fajr:.5,isha:.5};case n.SeventhOfTheNight:return{fajr:1/7,isha:1/7};case n.TwilightAngle:return{fajr:this.fajrAngle/60,isha:this.ishaAngle/60};default:throw`Invalid high latitude rule found when attempting to compute night portions: ${this.highLatitudeRule}`}}}const D={MuslimWorldLeague(){const t=new S("MuslimWorldLeague",18,17);return t.methodAdjustments.dhuhr=1,t},Egyptian(){const t=new S("Egyptian",19.5,17.5);return t.methodAdjustments.dhuhr=1,t},Karachi(){const t=new S("Karachi",18,18);return t.methodAdjustments.dhuhr=1,t},UmmAlQura:()=>new S("UmmAlQura",18.5,0,90),Dubai(){const t=new S("Dubai",18.2,18.2);return t.methodAdjustments={...t.methodAdjustments,sunrise:-3,dhuhr:3,asr:3,maghrib:3},t},MoonsightingCommittee(){const t=new S("MoonsightingCommittee",18,18);return t.methodAdjustments={...t.methodAdjustments,dhuhr:5,maghrib:3},t},NorthAmerica(){const t=new S("NorthAmerica",15,15);return t.methodAdjustments.dhuhr=1,t},Kuwait:()=>new S("Kuwait",18,17.5),Qatar:()=>new S("Qatar",18,0,90),Singapore(){const t=new S("Singapore",20,18);return t.methodAdjustments.dhuhr=1,t.rounding=i.Up,t},Tehran:()=>new S("Tehran",17.7,14,0,4.5),Turkey(){const t=new S("Turkey",18,17);return t.methodAdjustments={...t.methodAdjustments,sunrise:-7,dhuhr:5,asr:4,maghrib:7},t},Other:()=>new S("Other",0,0)},v={Fajr:"fajr",Sunrise:"sunrise",Dhuhr:"dhuhr",Asr:"asr",Maghrib:"maghrib",Isha:"isha",None:"none"};class N{constructor(t){return this.hours=Math.floor(t),this.minutes=Math.floor(60*(t-this.hours)),this.seconds=Math.floor(60*(t-(this.hours+this.minutes/60))*60),this}utcDate(t,e,n){return new Date(Date.UTC(t,e,n,this.hours,this.minutes,this.seconds))}}class y{constructor(t,n,a){this.coordinates=t,this.date=n,this.calculationParameters=a;let i,d,c,g,m,M,p,b,S=new A(n,t);c=new N(S.transit).utcDate(n.getFullYear(),n.getMonth(),n.getDate()),d=new N(S.sunrise).utcDate(n.getFullYear(),n.getMonth(),n.getDate()),m=new N(S.sunset).utcDate(n.getFullYear(),n.getMonth(),n.getDate());const D=s(n,1);let v=new A(D,t);const y=a.polarCircleResolution;if((!l(d)||!l(m)||isNaN(v.sunrise))&&y!==w.Unresolved){const e=((t,e,n)=>{const a={date:e,tomorrow:s(e,1),coordinates:n,solarTime:new A(e,n),tomorrowSolarTime:new A(s(e,1),n)};switch(t){case w.AqrabYaum:return T(n,e)||a;case w.AqrabBalad:{const{latitude:t}=n;return j(n,e,t-.5*Math.sign(t))||a}default:return a}})(y,n,t);S=e.solarTime,v=e.tomorrowSolarTime;const a=[n.getFullYear(),n.getMonth(),n.getDate()];c=new N(S.transit).utcDate(...a),d=new N(S.sunrise).utcDate(...a),m=new N(S.sunset).utcDate(...a)}g=new N(S.afternoon(function(t){switch(t){case e.Shafi:return 1;case e.Hanafi:return 2;default:throw"Invalid Madhab"}}(a.madhab))).utcDate(n.getFullYear(),n.getMonth(),n.getDate());const O=new N(v.sunrise).utcDate(D.getFullYear(),D.getMonth(),D.getDate()),L=(Number(O)-Number(m))/1e3;i=new N(S.hourAngle(-1*a.fajrAngle,!1)).utcDate(n.getFullYear(),n.getMonth(),n.getDate()),"MoonsightingCommittee"===a.method&&t.latitude>=55&&(b=L/7,i=o(d,-b));const Y=function(){if("MoonsightingCommittee"===a.method)return f.seasonAdjustedMorningTwilight(t.latitude,u(n),n.getFullYear(),d);{const t=a.nightPortions().fajr;return b=t*L,o(d,-b)}}();if((isNaN(i.getTime())||Y>i)&&(i=Y),a.ishaInterval>0)p=r(m,a.ishaInterval);else{p=new N(S.hourAngle(-1*a.ishaAngle,!0)).utcDate(n.getFullYear(),n.getMonth(),n.getDate()),"MoonsightingCommittee"===a.method&&t.latitude>=55&&(b=L/7,p=o(m,b));const e=function(){if("MoonsightingCommittee"===a.method)return f.seasonAdjustedEveningTwilight(t.latitude,u(n),n.getFullYear(),m,a.shafaq);{const t=a.nightPortions().isha;return b=t*L,o(m,b)}}();(isNaN(p.getTime())||e<p)&&(p=e)}if(M=m,a.maghribAngle){const t=new N(S.hourAngle(-1*a.maghribAngle,!0)).utcDate(n.getFullYear(),n.getMonth(),n.getDate());m<t&&p>t&&(M=t)}const C=(a.adjustments.fajr||0)+(a.methodAdjustments.fajr||0),F=(a.adjustments.sunrise||0)+(a.methodAdjustments.sunrise||0),q=(a.adjustments.dhuhr||0)+(a.methodAdjustments.dhuhr||0),x=(a.adjustments.asr||0)+(a.methodAdjustments.asr||0),I=(a.adjustments.maghrib||0)+(a.methodAdjustments.maghrib||0),P=(a.adjustments.isha||0)+(a.methodAdjustments.isha||0);this.fajr=h(r(i,C),a.rounding),this.sunrise=h(r(d,F),a.rounding),this.dhuhr=h(r(c,q),a.rounding),this.asr=h(r(g,x),a.rounding),this.sunset=h(m,a.rounding),this.maghrib=h(r(M,I),a.rounding),this.isha=h(r(p,P),a.rounding)}timeForPrayer(t){return t===v.Fajr?this.fajr:t===v.Sunrise?this.sunrise:t===v.Dhuhr?this.dhuhr:t===v.Asr?this.asr:t===v.Maghrib?this.maghrib:t===v.Isha?this.isha:null}currentPrayer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return t>=this.isha?v.Isha:t>=this.maghrib?v.Maghrib:t>=this.asr?v.Asr:t>=this.dhuhr?v.Dhuhr:t>=this.sunrise?v.Sunrise:t>=this.fajr?v.Fajr:v.None}nextPrayer(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return t>=this.isha?v.None:t>=this.maghrib?v.Isha:t>=this.asr?v.Maghrib:t>=this.dhuhr?v.Asr:t>=this.sunrise?v.Dhuhr:t>=this.fajr?v.Sunrise:v.Fajr}}t.CalculationMethod=D,t.CalculationParameters=S,t.Coordinates=a,t.HighLatitudeRule=n,t.Madhab=e,t.PolarCircleResolution=w,t.Prayer=v,t.PrayerTimes=y,t.Qibla=function(t){const e=new a(21.4225241,39.8261818),n=Math.sin(d(e.longitude)-d(t.longitude)),i=Math.cos(d(t.latitude))*Math.tan(d(e.latitude)),s=Math.sin(d(t.latitude))*Math.cos(d(e.longitude)-d(t.longitude));return m(c(Math.atan2(n,i-s)))},t.Rounding=i,t.Shafaq=M,t.SunnahTimes=class{constructor(t){const e=s(t.date,1),n=(new y(t.coordinates,e,t.calculationParameters).fajr.getTime()-t.maghrib.getTime())/1e3;this.middleOfTheNight=h(o(t.maghrib,n/2)),this.lastThirdOfTheNight=h(o(t.maghrib,n*(2/3)))}},Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=adhan.umd.min.js.map
